rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Restrict access to student data to authenticated users (admins) only.
    // This prevents unauthorized access to sensitive student information.
    match /students/{studentId} {
      allow read, write: if request.auth != null;
    }

    // Allow public read access to the dashboard metrics for performance,
    // but restrict writes to authenticated users (backend functions).
    match /metrics/{metricId} {
        allow read; // Or tighten as needed, e.g., if request.auth != null;
        allow write: if request.auth != null;
    }

    // Allow public read access for the TV welcome screen,
    // but only allow authenticated admins to update the list of names.
    match /display/{displayId} {
        allow read;
        allow write: if request.auth != null;
    }
  }
}
